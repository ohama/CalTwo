---
phase: 02-core-calculator-logic
plan: 03
type: execute
wave: 3
depends_on: ["02-02"]
files_modified:
  - tutorial/phase-02.md
  - src/App.fs
autonomous: true

must_haves:
  truths:
    - "Korean tutorial explains MVU pattern with calculator-specific examples"
    - "Tutorial includes complete code examples for Model, Msg, update function"
    - "Tutorial explains TDD workflow (RED → GREEN) with test examples"
    - "Tutorial explains left-to-right evaluation and edge case handling"
    - "Dev server shows calculator display with current model state"
  artifacts:
    - path: "tutorial/phase-02.md"
      provides: "Korean tutorial for Phase 2 (MVU pattern + calculator logic)"
      min_lines: 200
    - path: "src/App.fs"
      provides: "Updated view showing calculator display state"
      contains: "model.Display"
  key_links:
    - from: "tutorial/phase-02.md"
      to: "src/Calculator.fs"
      via: "Code examples referencing Calculator types"
      pattern: "Calculator\\.fs"
---

<objective>
Write the Korean tutorial for Phase 2 and ensure the view displays calculator state so the user can see the logic working in the browser.

Purpose: TUT-01/02/03 requirements (Korean tutorial) and visual confirmation that calculator logic works via the browser display.
Output: Comprehensive Korean tutorial (tutorial/phase-02.md) and updated view function showing calculator display.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-calculator-logic/02-RESEARCH.md
@.planning/phases/02-core-calculator-logic/02-02-SUMMARY.md
@src/Calculator.fs
@src/App.fs
@tests/Tests.fs
@tutorial/phase-01.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update view to display calculator state and add temporary test buttons</name>
  <files>src/App.fs</files>
  <action>
Update the `view` function in `src/App.fs` to display the calculator model state. This is a MINIMAL view update — full UI (button grid, styling) is Phase 3. The goal is to show the calculator logic works in the browser.

Add:
1. Display area showing `model.Display` with basic styling (large font, right-aligned, background)
2. A few temporary inline buttons to test the logic works in the browser:
   - Digit buttons: 0-9
   - Operator buttons: +, -, ×, ÷
   - Equals button: =
   - Clear button: C
   - Decimal button: .

These are TEMPORARY — Phase 3 will replace with proper grid layout.

```fsharp
let view (model: Model) (dispatch: Msg -> unit) =
    Html.div [
        prop.style [ style.padding 20; style.fontFamily "monospace"; style.maxWidth 400 ]
        prop.children [
            Html.h2 "CalTwo Calculator"
            // Display
            Html.div [
                prop.style [
                    style.fontSize 32
                    style.padding 15
                    style.backgroundColor "#222"
                    style.color "#0f0"
                    style.textAlign.right
                    style.marginBottom 10
                    style.borderRadius 5
                    style.minHeight 50
                    style.lineHeight 50
                ]
                prop.text model.Display
            ]
            // Temporary test buttons (Phase 3 will replace with proper UI)
            Html.div [
                prop.style [ style.display.flex; style.flexWrap.wrap; style.gap 5 ]
                prop.children [
                    for d in 0..9 do
                        Html.button [
                            prop.text (string d)
                            prop.onClick (fun _ -> dispatch (DigitPressed d))
                            prop.style [ style.padding(10, 15); style.fontSize 16 ]
                        ]
                    Html.button [
                        prop.text "."
                        prop.onClick (fun _ -> dispatch DecimalPressed)
                        prop.style [ style.padding(10, 15); style.fontSize 16 ]
                    ]
                    Html.button [
                        prop.text "+"
                        prop.onClick (fun _ -> dispatch (OperatorPressed Add))
                        prop.style [ style.padding(10, 15); style.fontSize 16 ]
                    ]
                    Html.button [
                        prop.text "-"
                        prop.onClick (fun _ -> dispatch (OperatorPressed Subtract))
                        prop.style [ style.padding(10, 15); style.fontSize 16 ]
                    ]
                    Html.button [
                        prop.text "×"
                        prop.onClick (fun _ -> dispatch (OperatorPressed Multiply))
                        prop.style [ style.padding(10, 15); style.fontSize 16 ]
                    ]
                    Html.button [
                        prop.text "÷"
                        prop.onClick (fun _ -> dispatch (OperatorPressed Divide))
                        prop.style [ style.padding(10, 15); style.fontSize 16 ]
                    ]
                    Html.button [
                        prop.text "="
                        prop.onClick (fun _ -> dispatch EqualsPressed)
                        prop.style [ style.padding(10, 15); style.fontSize 16 ]
                    ]
                    Html.button [
                        prop.text "C"
                        prop.onClick (fun _ -> dispatch ClearPressed)
                        prop.style [ style.padding(10, 15); style.fontSize 16 ]
                    ]
                ]
            ]
        ]
    ]
```

Note: Use `open Calculator` at the top of App.fs (should already be there from Plan 02-02).
  </action>
  <verify>
1. `dotnet build src/App.fsproj` — compiles without errors
2. `npm run dev` — starts dev server, page shows calculator display and buttons
3. `npm test` — all tests still pass (no regression)
  </verify>
  <done>Browser shows calculator display with "0" initial state and clickable buttons. Clicking buttons dispatches messages and display updates correctly (digits appear, operations evaluate, clear resets).</done>
</task>

<task type="auto">
  <name>Task 2: Write Korean tutorial for Phase 2</name>
  <files>tutorial/phase-02.md</files>
  <action>
Create `tutorial/phase-02.md` — a comprehensive Korean tutorial explaining Phase 2 implementation. Follow the same style and depth as `tutorial/phase-01.md` (511 lines).

Tutorial structure:

```markdown
# Phase 2: 계산기 핵심 로직 (Core Calculator Logic)

## 이 단계에서 배우는 것
- MVU (Model-View-Update) 패턴으로 계산기 상태 관리
- F# 판별 구분 조합 (Discriminated Unions)으로 타입 설계
- 순수 함수 (Pure Functions)로 계산기 로직 구현
- TDD (Test-Driven Development) 방법론
- Fable.Mocha로 단위 테스트 작성

## 1. MVU 패턴 이해하기
[Explain Model-View-Update cycle with diagram]
[Show how user action → Msg → update → new Model → view re-renders]

## 2. 계산기 타입 설계 (Calculator.fs)
[Explain each type: MathOp, MathResult, Msg, Model]
[Why discriminated unions are perfect for this]
[Show the full Calculator.fs code with Korean comments]

## 3. 순수 함수로 계산 로직 구현
[Explain doMathOp, parseDisplay, formatResult]
[Show why pure functions are testable]
[Explain left-to-right evaluation with step-by-step example]
[Example: 2 + 3 × 4 = ? → 20 (not 14)]

## 4. Update 함수 구현 (App.fs)
[Walk through each Msg case in update function]
[Explain StartNew flag and why it's needed]
[Show DigitPressed, DecimalPressed, OperatorPressed, EqualsPressed, ClearPressed]

## 5. 테스트 주도 개발 (TDD)
[Explain RED → GREEN → REFACTOR cycle]
[Show how tests were written BEFORE implementation]
[Example test: 2 + 3 = 5]
[Example test: divide by zero]

## 6. 테스트 인프라 설정
[Explain Fable.Mocha and why it's used]
[Show tests/Tests.fsproj structure]
[Explain npm test pipeline: Fable compile → mocha run]

## 7. 엣지 케이스 처리
[Multiple decimals: 3..1 → 3.1 (second . ignored)]
[Leading zeros: 007 → 7]
[Division by zero: "Error"]
[Negative results: 3 - 8 = -5]

## 8. 실행해보기
[Commands to run tests, start dev server]
[Expected output for npm test]

## 9. 다음 단계
[Preview Phase 3: UI Implementation]
[What buttons and layout will be added]
```

Requirements for tutorial content:
- All content in Korean (한국어)
- Include complete code examples (not just snippets)
- Include terminal commands with expected output
- Explain concepts at beginner level
- Include MVU data flow diagram (text-based)
- Minimum 200 lines
  </action>
  <verify>
1. File exists: `tutorial/phase-02.md`
2. File is 200+ lines
3. Content is in Korean
4. Contains code examples from Calculator.fs, App.fs, Tests.fs
5. Contains `npm test` command and expected output
  </verify>
  <done>Korean tutorial (200+ lines) explains MVU pattern, calculator types, pure update function, TDD methodology, edge case handling, and test infrastructure with complete code examples and commands.</done>
</task>

</tasks>

<verification>
1. `npm run dev` shows calculator display and buttons in browser
2. Clicking buttons in browser updates display correctly
3. `npm test` still passes all tests (no regression)
4. `tutorial/phase-02.md` exists with 200+ lines of Korean content
5. Tutorial covers: MVU pattern, types, update function, TDD, edge cases, test commands
</verification>

<success_criteria>
- Calculator is interactive in browser (display updates on button clicks)
- Korean tutorial complete with code examples and commands
- All tests pass (no regression from view changes)
- TUT-01, TUT-02, TUT-03 requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-calculator-logic/02-03-SUMMARY.md`
</output>
